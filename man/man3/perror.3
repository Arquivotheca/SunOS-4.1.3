.\" @(#)perror.3 1.1 92/07/30 SMI; from UCB 4.3 BSD and S5
.TH PERROR 3  "6 December 1988"
.SH NAME
perror, errno \- system error messages
.SH SYNOPSIS
.LP
.nf
.ft B
void perror(s)
char *s;
.ft
.fi
.LP
.nf
.ft B
#include <errno.h>
.ft
.fi
.LP
.nf
.ft B
int sys_nerr;
char *sys_errlist[\|];
int errno;
.ft
.fi
.IX  "perror()"  ""  "\fLperror()\fP \(em system error messages"
.IX  "sys_errlist"  ""  "\fLsys_errlist\fP \(em system error messages"
.IX  "sys_nerr"  ""  "\fLsys_nerr\fP \(em system error messages"
.IX  "errno"  ""  "\fLerrno\fP \(em system error messages"
.IX  "system error messages"  "perror()"  ""  "\fLperror()\fP \(em system error messages"
.IX  "system error messages"  "sys_errlist"  ""  "\fLsys_errlist\fP \(em system error messages"
.IX  "system error messages"  "sys_nerr"  ""  "\fLsys_nerr\fP \(em system error messages"
.IX  "system error messages"  "errno"  ""  "\fLerrno\fP \(em system error messages"
.IX  "error messages"
.IX  messages  "system error"
.SH DESCRIPTION
.LP
.B perror(\|)
produces a short error message on the standard error
describing the last error encountered during a call
to a system or library function.
If
.I s
is not a
.SM NULL
pointer and does not point to a null string, the string it points to is
printed, followed by a colon, followed by
a space, followed by the message and a
.SM NEWLINE\s0.
If
.I s
is a
.SM NULL
pointer or points to a null string, just the message is printed, followed by a
.SM NEWLINE\s0.
To be of most use, the argument string should
include the name of the program that incurred the error.
The error number is taken from the external variable
.B errno
(see
.BR intro (2)),
which is set when errors occur but not cleared when
non-erroneous calls are made.
.LP
To simplify variant formatting of messages, the vector of message strings
.B sys_errlist
is provided;
.B errno
can be used as an index in this table to get the
message string without the newline.
.B sys_nerr
is the number of messages provided for in the table;
it should be checked because new error codes
may be added to the system before
they are added to the table.
.SH "SEE ALSO"
.BR intro (2),
.BR psignal (3)
